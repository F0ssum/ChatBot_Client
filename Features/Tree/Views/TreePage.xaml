<Page x:Class="ChatBotClient.Features.Tree.Views.TreePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      xmlns:local="clr-namespace:ChatBotClient.Features.Tree"
      mc:Ignorable="d"
      Background="{StaticResource BackgroundBrush}"
      UseLayoutRounding="True"
      SnapsToDevicePixels="True"
      TextOptions.TextFormattingMode="Display">
    <Grid>
        <!-- Дерево (можно заменить на картинку или Canvas) -->
        <Image Source="/Resources/Icons/tree.png" Stretch="None" HorizontalAlignment="Center" VerticalAlignment="Center"/>
        <Canvas>
            <ItemsControl ItemsSource="{Binding Leaves}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Canvas />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemContainerStyle>
                    <Style>
                        <Setter Property="Canvas.Left" Value="{Binding X}" />
                        <Setter Property="Canvas.Top" Value="{Binding Y}" />
                    </Style>
                </ItemsControl.ItemContainerStyle>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Command="{Binding DataContext.OpenDiaryEntryCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                                CommandParameter="{Binding}">
                            <StackPanel>
                                <TextBlock Text="{Binding Emoji}" FontSize="24"/>
                                <TextBlock Text="{Binding Title}" FontSize="12"/>
                            </StackPanel>
                        </Button>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Canvas>
        <Border Style="{StaticResource BaseBorderStyle}" Margin="20" Effect="{StaticResource DropShadowEffect}">
            <Grid Margin="20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <TextBlock Text="Дерево заботы" FontSize="18" FontWeight="SemiBold" 
                           Style="{StaticResource BaseTextStyle}" Margin="0,0,0,10"/>
                <TextBlock Grid.Row="1" Text="Визуализация прогресса в разработке..." 
                           Style="{StaticResource BaseTextStyle}" TextWrapping="Wrap"/>
                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                    <Button Content="{materialDesign:PackIcon Kind=Chat}" Style="{StaticResource IconButtonStyle}"
                            ToolTip="Вернуться к чату" Command="{Binding GoToChatCommand}"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>